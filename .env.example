# ============================================================
# Docker Server Blockchain - Environment Configuration
# ============================================================
# Copy this file to .env and configure as needed
#
# Variable syntax for Coolify:
#   ${VAR:?}           - Required, will error if not set
#   ${VAR:?default}    - Required, uses default if not set
#   ${VAR:-default}    - Optional, uses default if not set
# ============================================================

# ============================================================
# BTCPay Server Configuration (Required)
# ============================================================

# Domain for BTCPay Server (Required)
BTCPAY_HOST=btcpay.example.com

# BTCPay Server version (Required with default)
BTCPAY_VERSION=2.0.6

# Bitcoin network: mainnet, testnet, signet, regtest (Required with default)
BTCPAY_NETWORK=mainnet

# BTCPay binding address (Required with default)
BTCPAY_BIND=0.0.0.0:49392

# URL root path (Required with default)
BTCPAY_ROOTPATH=/

# Protocol: http or https (Required with default)
BTCPAY_PROTOCOL=https

# ============================================================
# BTCPay Server Configuration (Optional)
# ============================================================

# SSH connection for remote host management (Optional)
BTCPAY_SSH_CONNECTION=

# SSH key file path (Optional)
BTCPAY_SSHKEYFILE=

# SSH trusted fingerprints (Optional)
BTCPAY_SSHTRUSTEDFINGERPRINTS=

# Update URL for in-app updates (Optional)
BTCPAY_UPDATEURL=

# Docker deployment mode (Optional - default: true)
BTCPAY_DOCKERDEPLOYMENT=true

# Lightning Network connection string (Optional)
# Examples:
#   LND: type=lnd-rest;server=https://lnd:8080;macaroonfilepath=/lnd/admin.macaroon
#   CLN: type=clightning;server=unix://root/.lightning/bitcoin/lightning-rpc
BTCPAY_BTCLIGHTNING=

# Debug log path (Optional)
BTCPAY_DEBUGLOG=

# ASP.NET environment (Optional - default: Production)
ASPNETCORE_ENVIRONMENT=Production

# ============================================================
# NBXplorer Configuration (Required with defaults)
# ============================================================

# NBXplorer version
NBXPLORER_VERSION=2.5.16

# Binding address
NBXPLORER_BIND=0.0.0.0:32838

# Event trimming threshold
NBXPLORER_TRIMEVENTS=10000

# PostgreSQL max pool size
NBXPLORER_POSTGRES_MAXPOOL=20

# ============================================================
# NBXplorer Configuration (Optional)
# ============================================================

# Disable authentication (default: 1 for internal use)
NBXPLORER_NOAUTH=1

# Expose RPC methods (default: 1)
NBXPLORER_EXPOSERPC=1

# ============================================================
# Bitcoin Core Configuration (Required with defaults)
# ============================================================

# Bitcoin Core version
BITCOIN_VERSION=28.0

# RPC credentials (Required with defaults)
BITCOIN_RPC_USER=rpc
BITCOIN_RPC_PASSWORD=rpcpassword

# ============================================================
# Bitcoin Core Configuration (Optional)
# ============================================================

# Create default wallet on startup (Optional - default: false)
BITCOIN_CREATE_WALLET=false

# Maximum mempool size in MB (Optional - default: 500)
BITCOIN_MAXMEMPOOL=500

# Database cache size in MB (Optional - default: 512)
BITCOIN_DBCACHE=512

# Prune mode: 0 = disabled, >550 = prune to N MB (Optional - default: 0)
# Set to 550 or higher to enable pruning and save disk space
BITCOIN_PRUNE=0

# Transaction index (Optional - default: 1)
# Set to 0 if using pruning
BITCOIN_TXINDEX=1

# ============================================================
# PostgreSQL Configuration (Required)
# ============================================================

# PostgreSQL password (Required - no default for security)
POSTGRES_PASSWORD=your_secure_password_here

# ============================================================
# PostgreSQL Configuration (Required with defaults)
# ============================================================

# PostgreSQL version
POSTGRES_VERSION=16-alpine

# PostgreSQL username
POSTGRES_USER=postgres

# Default database name
POSTGRES_DB=btcpaymainnet

# Shared memory size
POSTGRES_SHM_SIZE=256mb

# ============================================================
# PostgreSQL Configuration (Optional - Performance Tuning)
# ============================================================

# Authentication method (Optional - default: scram-sha-256)
POSTGRES_HOST_AUTH_METHOD=scram-sha-256

# Maximum connections (Optional - default: 200)
POSTGRES_MAX_CONNECTIONS=200

# Shared buffers size (Optional - default: 256MB)
POSTGRES_SHARED_BUFFERS=256MB

# Effective cache size (Optional - default: 1GB)
POSTGRES_EFFECTIVE_CACHE=1GB

# ============================================================
# Coolify Magic Variables (Auto-generated)
# ============================================================
# These are automatically generated by Coolify when deployed:
#
# SERVICE_FQDN_BTCPAYSERVER    - FQDN for BTCPay Server
# SERVICE_URL_BTCPAYSERVER     - Full URL for BTCPay Server
# SERVICE_PASSWORD_POSTGRES    - Auto-generated PostgreSQL password
#
# You can use these in place of manual configuration:
#   BTCPAY_HOST=${SERVICE_FQDN_BTCPAYSERVER}
#   POSTGRES_PASSWORD=${SERVICE_PASSWORD_POSTGRES}
# ============================================================
