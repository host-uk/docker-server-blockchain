; ============================================================
; Monero Wallet RPC Service
; ============================================================
; Required for BTCPay Server Monero plugin
; Connects to monerod and provides wallet functionality
; ============================================================

[program:monero-wallet-rpc]
command=monero-wallet-rpc
    --daemon-address=127.0.0.1:%(ENV_XMR_RPC_PORT)s
    --daemon-login=%(ENV_MONERO_RPC_USER)s:%(ENV_MONERO_RPC_PASSWORD)s
    --rpc-bind-ip=127.0.0.1
    --rpc-bind-port=18082
    --rpc-login=%(ENV_MONERO_RPC_USER)s:%(ENV_MONERO_RPC_PASSWORD)s
    --wallet-dir=%(ENV_XMR_WALLET_DIR)s
    --disable-rpc-login
    --trusted-daemon
directory=/opt
autostart=true
autorestart=true
priority=310
startsecs=10
startretries=5
stopwaitsecs=30
stopsignal=INT
redirect_stderr=true
stdout_logfile=/var/log/supervisor/monero-wallet-rpc.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=3
